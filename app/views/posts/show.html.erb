<% provide(:page_title, @post.title) %>
<h3 align="center"><%= "#{@post.title}(#{@topic.topic})" %></h3><br>
<p align="justify">
<h2>Description</h2>
<%= @post.description %></p>
<%= link_to 'Edit', edit_topic_post_path(id: @post) %>
<%= link_to "Delete", topic_post_path(id: @post), method: :delete %>
<%= link_to "Add Tag", new_post_tag_path(post_id: @post) %><br>
<% if @tag.present? %>
  <h3>Tags</h3>
  <% @tag.each do |t| %>
    <%= "##{t.tag}" %>
  <% end %>
<% end %>
<%= form_tag(controller: :posts, action: :rate,:topic_id => @post.topic_id,:post_id => @post.id,method: :post) do %>
  <% for i in 1..5 %>
    <%= radio_button_tag(:rate, i) %>
    <%= label_tag('name', i) %>
    <%= hidden_field_tag(:post_id,@post.id) %>
    <%= hidden_field_tag(:topic_id, @post.topic_id) %>
  <% end %>
  <%= submit_tag('Rate',post_id: @post.id)%>
<% end %>
<% t = 0 %>
<% if @rate.present? %>
  <% @rate.each do |k, v| %>
    <% t.times do %>
      &nbsp
    <% end %>
    <% k.times do %>
      <%= "*" %>
    <% end %>
    <%= v %><br>
    <% t = t + 1 %>
  <% end %>
<% end %>
<%= "Average Rating #{@avg_rate}"  %>
<div class="jumbotron">
  <% if @comment.present? %>
    <h3>Comments</h3>
    <% @comment.each do |c| %>
      <%= c.updated_at.to_time %><br>
      <%= c.comment %>
      <%= link_to "Edit", edit_post_comment_path(post_id: @post.id, id: c.id) %>
      <%= link_to "Delete", post_comment_path(post_id: @post.id, id: c.id), method: :delete %><br>
    <% end %>
    </div>
  <% end %>

  <%= link_to "Add Comments", new_post_comment_path(@post.id) %>